---
title: 邮件检测系统
language_tabs:
  - shell: Shell
  - http: HTTP
  - javascript: JavaScript
  - ruby: Ruby
  - python: Python
  - php: PHP
  - java: Java
  - go: Go
toc_footers: []
includes: []
search: true
code_clipboard: true
highlight_theme: darkula
headingLevel: 2
generator: "@tarslib/widdershins v4.0.30"

---

# 邮件检测系统

Base URLs:

# Authentication

* API Key (sessionAuth)
  * Parameter Name: **sessionid**, in: cookie.

# Default

## POST 文本邮件检测

POST /mail/detect/

检测邮件文本内容是否为垃圾邮件

> Body 请求参数

```json
{
  "email_content": "尊敬的您好！这是关于下周会议的通知，会议将于9月5日上午10点在公司大会议室举行，请您准时参加。",
  "email_sender": "hr303115@qq.com",
  "email_subject": "会议通知：9月5日公司全体会议"
}
```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Cookie|header|string| 否 |none|
|body|body|object| 否 |none|
|» email_content|body|string| 是 |none|
|» sender_email|body|string| 否 |none|
|» subject|body|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "detection_result": "spam",
    "confidence_score": 0,
    "risk_factors": [
      "string"
    ],
    "record_id": 0
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|检测成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» detection_result|string|false|none||none|
|»» confidence_score|number|false|none||none|
|»» risk_factors|[string]|false|none||none|
|»» record_id|integer|false|none||none|

#### 枚举值

|属性|值|
|---|---|
|detection_result|spam|
|detection_result|legitimate|

## POST 文件上传检测

POST /mail/detect/file/

上传邮件文件进行检测

> Body 请求参数

```yaml
file: file://C:\Users\ponym\Desktop\垃圾邮件.txt
sender_email: 123@qq.com

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Cookie|header|string| 否 |none|
|body|body|object| 否 |none|
|» file|body|string(binary)| 是 |none|
|» sender_email|body|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "detection_result": "spam",
    "confidence_score": 0,
    "risk_factors": [
      "string"
    ],
    "record_id": 0,
    "file_info": {
      "filename": "string",
      "size": 0
    }
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|检测成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» detection_result|string|false|none||none|
|»» confidence_score|number|false|none||none|
|»» risk_factors|[string]|false|none||none|
|»» record_id|integer|false|none||none|
|»» file_info|object|false|none||none|
|»»» filename|string|false|none||none|
|»»» size|integer|false|none||none|

#### 枚举值

|属性|值|
|---|---|
|detection_result|spam|
|detection_result|legitimate|

## POST 提交用户反馈

POST /feedback/

用户对检测结果提供反馈

> Body 请求参数

```json
{
  "record_id": 0,
  "feedback_type": "correct",
  "actual_result": "spam",
  "comments": "string"
}
```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Cookie|header|string| 否 |none|
|body|body|object| 是 |none|
|» record_id|body|integer| 是 |none|
|» feedback_type|body|string| 是 |none|
|» actual_result|body|string| 否 |none|
|» comments|body|string| 否 |none|

#### 枚举值

|属性|值|
|---|---|
|» feedback_type|correct|
|» feedback_type|incorrect|
|» actual_result|spam|
|» actual_result|legitimate|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "message": "string"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|反馈提交成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» message|string|false|none||none|

## GET 获取检测历史

GET /mail/history/

获取用户的检测历史记录

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|page|query|integer| 否 |none|
|page_size|query|integer| 否 |none|
|result|query|string| 否 |none|
|start_date|query|string(date)| 否 |none|
|end_date|query|string(date)| 否 |none|
|Cookie|header|string| 否 |none|

#### 枚举值

|属性|值|
|---|---|
|result|spam|
|result|legitimate|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "records": [
      {
        "id": 0,
        "email_content": "string",
        "detection_result": "string",
        "confidence_score": 0,
        "created_at": "2019-08-24T14:15:22Z",
        "sender_email": "string",
        "subject": "string"
      }
    ],
    "total": 0,
    "page": 0,
    "page_size": 0
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» records|[object]|false|none||none|
|»»» id|integer|false|none||none|
|»»» email_content|string|false|none||none|
|»»» detection_result|string|false|none||none|
|»»» confidence_score|number|false|none||none|
|»»» created_at|string(date-time)|false|none||none|
|»»» sender_email|string|false|none||none|
|»»» subject|string|false|none||none|
|»» total|integer|false|none||none|
|»» page|integer|false|none||none|
|»» page_size|integer|false|none||none|

## GET 获取检测记录详情

GET /history/{record_id}/

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|record_id|path|integer| 是 |none|
|Cookie|header|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "id": 0,
    "email_content": "string",
    "detection_result": "string",
    "confidence_score": 0,
    "risk_factors": [
      "string"
    ],
    "created_at": "2019-08-24T14:15:22Z",
    "sender_email": "string",
    "subject": "string",
    "file_path": "string",
    "user_feedback": {
      "feedback_type": "string",
      "comments": "string"
    }
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» id|integer|false|none||none|
|»» email_content|string|false|none||none|
|»» detection_result|string|false|none||none|
|»» confidence_score|number|false|none||none|
|»» risk_factors|[string]|false|none||none|
|»» created_at|string(date-time)|false|none||none|
|»» sender_email|string|false|none||none|
|»» subject|string|false|none||none|
|»» file_path|string|false|none||none|
|»» user_feedback|object|false|none||none|
|»»» feedback_type|string|false|none||none|
|»»» comments|string|false|none||none|

## GET 获取收藏列表

GET /favorites/

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|page|query|integer| 否 |none|
|page_size|query|integer| 否 |none|
|Cookie|header|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "favorites": [
      {
        "id": 0,
        "record": {
          "id": 0,
          "subject": "string",
          "sender_email": "string",
          "detection_result": "string"
        },
        "created_at": "2019-08-24T14:15:22Z",
        "notes": "string"
      }
    ],
    "total": 0,
    "page": 0,
    "page_size": 0
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» favorites|[object]|false|none||none|
|»»» id|integer|false|none||none|
|»»» record|object|false|none||none|
|»»»» id|integer|false|none||none|
|»»»» subject|string|false|none||none|
|»»»» sender_email|string|false|none||none|
|»»»» detection_result|string|false|none||none|
|»»» created_at|string(date-time)|false|none||none|
|»»» notes|string|false|none||none|
|»» total|integer|false|none||none|
|»» page|integer|false|none||none|
|»» page_size|integer|false|none||none|

## POST 添加收藏

POST /favorites/

> Body 请求参数

```json
{
  "record_id": 0,
  "notes": "string"
}
```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Cookie|header|string| 否 |none|
|body|body|object| 是 |none|
|» record_id|body|integer| 是 |none|
|» notes|body|string| 否 |none|

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|201|[Created](https://tools.ietf.org/html/rfc7231#section-6.3.2)|收藏成功|None|

## DELETE 删除收藏

DELETE /mail/favorites/19/

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Cookie|header|string| 否 |none|

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|204|[No Content](https://tools.ietf.org/html/rfc7231#section-6.3.5)|删除成功|None|

## GET 获取用户仪表板数据

GET /user/dashboard/

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Cookie|header|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "user_info": {
      "username": "string",
      "email": "string",
      "join_date": "2019-08-24T14:15:22Z"
    },
    "statistics": {
      "total_detections": 0,
      "spam_detected": 0,
      "legitimate_detected": 0,
      "accuracy_rate": 0
    },
    "recent_detections": [
      {
        "id": 0,
        "subject": "string",
        "detection_result": "string",
        "created_at": "2019-08-24T14:15:22Z"
      }
    ],
    "favorite_emails": [
      {
        "id": 0,
        "subject": "string",
        "notes": "string"
      }
    ]
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» user_info|object|false|none||none|
|»»» username|string|false|none||none|
|»»» email|string|false|none||none|
|»»» join_date|string(date-time)|false|none||none|
|»» statistics|object|false|none||none|
|»»» total_detections|integer|false|none||none|
|»»» spam_detected|integer|false|none||none|
|»»» legitimate_detected|integer|false|none||none|
|»»» accuracy_rate|number|false|none||none|
|»» recent_detections|[object]|false|none||none|
|»»» id|integer|false|none||none|
|»»» subject|string|false|none||none|
|»»» detection_result|string|false|none||none|
|»»» created_at|string(date-time)|false|none||none|
|»» favorite_emails|[object]|false|none||none|
|»»» id|integer|false|none||none|
|»»» subject|string|false|none||none|
|»»» notes|string|false|none||none|

## GET 获取用户统计信息

GET /user/statistics/

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|period|query|string| 否 |none|
|start_date|query|string(date)| 否 |none|
|end_date|query|string(date)| 否 |none|
|Cookie|header|string| 否 |none|

#### 枚举值

|属性|值|
|---|---|
|period|month|
|period|quarter|
|period|year|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "monthly_stats": [
      {
        "month": "string",
        "total_detections": 0,
        "spam_count": 0,
        "legitimate_count": 0
      }
    ],
    "risk_factors_stats": {
      "property1": 0,
      "property2": 0
    },
    "accuracy_trend": [
      {
        "date": "2019-08-24",
        "accuracy": 0
      }
    ]
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» monthly_stats|[object]|false|none||none|
|»»» month|string|false|none||none|
|»»» total_detections|integer|false|none||none|
|»»» spam_count|integer|false|none||none|
|»»» legitimate_count|integer|false|none||none|
|»» risk_factors_stats|object|false|none||none|
|»»» **additionalProperties**|integer|false|none||none|
|»» accuracy_trend|[object]|false|none||none|
|»»» date|string(date)|false|none||none|
|»»» accuracy|number|false|none||none|

## GET 管理员仪表板

GET /admin/dashboard/

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Cookie|header|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "system_stats": {
      "total_users": 0,
      "active_users": 0,
      "total_detections": 0,
      "spam_detections": 0,
      "spam_rate": 0
    },
    "recent_active_users": [
      {
        "id": 0,
        "username": "string",
        "email": "string",
        "last_login": "2019-08-24T14:15:22Z"
      }
    ],
    "risk_users": [
      {
        "id": 0,
        "user_id": 0,
        "username": "string",
        "risk_level": "string",
        "risk_type": "string",
        "created_at": "2019-08-24T14:15:22Z"
      }
    ],
    "system_status": {
      "database_status": "string",
      "ml_model_status": "string",
      "api_status": "string"
    }
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» system_stats|object|false|none||none|
|»»» total_users|integer|false|none||none|
|»»» active_users|integer|false|none||none|
|»»» total_detections|integer|false|none||none|
|»»» spam_detections|integer|false|none||none|
|»»» spam_rate|number|false|none||none|
|»» recent_active_users|[object]|false|none||none|
|»»» id|integer|false|none||none|
|»»» username|string|false|none||none|
|»»» email|string|false|none||none|
|»»» last_login|string(date-time)|false|none||none|
|»» risk_users|[object]|false|none||none|
|»»» id|integer|false|none||none|
|»»» user_id|integer|false|none||none|
|»»» username|string|false|none||none|
|»»» risk_level|string|false|none||none|
|»»» risk_type|string|false|none||none|
|»»» created_at|string(date-time)|false|none||none|
|»» system_status|object|false|none||none|
|»»» database_status|string|false|none||none|
|»»» ml_model_status|string|false|none||none|
|»»» api_status|string|false|none||none|

## GET 检测记录管理

GET /admin/records/

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|page|query|integer| 否 |none|
|page_size|query|integer| 否 |none|
|result|query|string| 否 |none|
|user_id|query|integer| 否 |none|
|Cookie|header|string| 否 |none|

#### 枚举值

|属性|值|
|---|---|
|result|spam|
|result|legitimate|

> 返回示例

> 200 Response

```json
{
  "success": true,
  "data": {
    "records": [
      {
        "id": 0,
        "user": {
          "id": 0,
          "username": "string"
        },
        "email_content": "string",
        "detection_result": "string",
        "confidence_score": 0,
        "created_at": "2019-08-24T14:15:22Z",
        "sender_email": "string",
        "subject": "string"
      }
    ],
    "total": 0,
    "page": 0,
    "page_size": 0
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» success|boolean|false|none||none|
|» data|object|false|none||none|
|»» records|[object]|false|none||none|
|»»» id|integer|false|none||none|
|»»» user|object|false|none||none|
|»»»» id|integer|false|none||none|
|»»»» username|string|false|none||none|
|»»» email_content|string|false|none||none|
|»»» detection_result|string|false|none||none|
|»»» confidence_score|number|false|none||none|
|»»» created_at|string(date-time)|false|none||none|
|»»» sender_email|string|false|none||none|
|»»» subject|string|false|none||none|
|»» total|integer|false|none||none|
|»» page|integer|false|none||none|
|»» page_size|integer|false|none||none|

# 数据模型
